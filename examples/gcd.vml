(define-machine gcd
  (registers a b t)
  (controller
    loop
    (branch (= (fetch b) 0) done)
    (assign t (remainder (fetch a) (fetch b)))
    (assign a (fetch b))
    (assign b (fetch t))
    (goto loop)
    done)
)
